const BASE=process.env.NEXT_PUBLIC_BACKEND_URL||'http://localhost:3001'; export const tradingFlowApi={ async runAnalysis(p:any){ const r=await fetch(`${BASE}/api/agents/run-analysis`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(p)}); if(!r.ok) throw new Error(await r.text()); return r.json(); }, async generateTradePlan(p:any){ const r=await fetch(`${BASE}/api/agents/generate-trade-plan`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(p)}); if(!r.ok) throw new Error(await r.text()); return r.json(); }, async validateTradePlan(plan:any,profile:any){ const r=await fetch(`${BASE}/api/risk/validate-trade-plan`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({plan,profile})}); if(!r.ok) throw new Error(await r.text()); return r.json(); }, async approvePaper(plan:any,riskCheckId:string,confirmations:string[]){ const r=await fetch(`${BASE}/api/trades/approve-paper`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({plan,riskCheckId,confirmations})}); if(!r.ok) throw new Error(await r.text()); return r.json(); }, portfolio: async()=> (await fetch(`${BASE}/api/portfolio`)).json(), liveStatus: async()=> (await fetch(`${BASE}/api/live/status`)).json() }